{% extends "bootstrap/base.html" %}
<!DOCTYPE html>
<html>

<!-- Mirrored from dreamguys.co.in/smarthr/blue/chat.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 05 Apr 2018 17:18:48 GMT -->
<head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0">

        <title>Chat - HRMS admin template</title>
        {% block styles %}
        {{super()}}
                <link rel="shortcut icon" type="image/x-icon" href="assets/img/favicon.png">
        <link rel="stylesheet" href="{{ url_for('static', filename='css/bootstrap.min.css') }}">
        		 <link rel="stylesheet" href="{{ url_for('static', filename='css/font-awesome.min.css') }}">
		 <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
		<link href="https://fonts.googleapis.com/css?family=Montserrat:300,400,500,600,700" rel="stylesheet">
                {% endblock %}
		<!--[if lt IE 9]>
			<script src="assets/js/html5shiv.min.js"></script>
			<script src="assets/js/respond.min.js"></script>
		<![endif]-->
    </head>
    <body>
    	{% block content %}
        <div class="main-wrapper">
            <div class="header">
                <div class="pull-right">
                <a type="button" class="btn btn-success logout" href="{{url_for('logout')}}">Log out</a>
                    </div>
            </div>
            <div class="sidebar" id="sidebar">
                <div class="sidebar-inner slimscroll">
					<div class="sidebar-menu">
						<ul>

							<li class="menu-title">Chat Groups <a href="#" data-toggle="modal" data-target="#add_group"><i class="fa fa-plus"></i></a></li>
							<li>
								<a href="chat.html">#General</a>
							</li>
							<li>
								<a href="chat.html">#Video Responsive Survey</a>
							</li>
							<li>
								<a href="chat.html">#500rs</a>
							</li>
							<li>
								<a href="chat.html">#warehouse</a>
							</li>
							<li class="menu-title">Friend Chats <a href="#" data-toggle="modal" data-target="#add_chat_user" onClick="addFriends()"><i class="fa fa-plus"></i></a></li>
							<div id="friendList">



                            </div>




















						</ul>
					</div>
                </div>
            </div>
            <div class="page-wrapper">
				<div class="chat-main-row">
					<div id = "chatHolder" class="chat-main-wrapper">













					</div>
				</div>
				<div id="drag_files" class="modal custom-modal fade center-modal" role="dialog">
					<div class="modal-dialog">
						<button type="button" class="close" data-dismiss="modal">&times;</button>
						<div class="modal-content">
							<div class="modal-header">
								<h3 class="modal-title">Drag and drop files upload</h3>
							</div>
							<div class="modal-body p-t-0">
                                <form id="js-upload-form">
									<div class="upload-drop-zone" id="drop-zone">
										<i class="fa fa-cloud-upload fa-2x"></i> <span class="upload-text">Just drag and drop files here</span>
									</div>
                                    <h4>Uploading</h4>
                                    <ul class="upload-list">
                                        <li class="file-list">
                                            <div class="upload-wrap">
                                                <div class="file-name">
                                                    <i class="fa fa-photo"></i>
                                                    photo.png
                                                </div>
                                                <div class="file-size">1.07 gb</div>
                                                <button type="button" class="file-close">
                                                    <i class="fa fa-close"></i>
                                                </button>
                                            </div>
                                            <div class="progress progress-xs progress-striped">
												<div class="progress-bar bg-success" role="progressbar" style="width: 65%"></div>
											</div>
                                            <div class="upload-process">37% done</div>
                                        </li>
                                        <li class="file-list">
                                            <div class="upload-wrap">
                                                <div class="file-name">
                                                    <i class="fa fa-file"></i>
                                                    task.doc
                                                </div>
                                                <div class="file-size">5.8 kb</div>
                                                <button type="button" class="file-close">
                                                    <i class="fa fa-close"></i>
                                                </button>
                                            </div>
                                            <div class="progress progress-xs progress-striped">
												<div class="progress-bar bg-success" role="progressbar" style="width: 65%"></div>
											</div>
                                            <div class="upload-process">37% done</div>
                                        </li>
                                        <li class="file-list">
                                            <div class="upload-wrap">
                                                <div class="file-name">
                                                    <i class="fa fa-photo"></i>
                                                    dashboard.png
                                                </div>
                                                <div class="file-size">2.1 mb</div>
                                                <button type="button" class="file-close">
                                                    <i class="fa fa-close"></i>
                                                </button>
                                            </div>
                                            <div class="progress progress-xs progress-striped">
												<div class="progress-bar bg-success" role="progressbar" style="width: 65%"></div>
											</div>
                                            <div class="upload-process">Completed</div>
                                        </li>
                                    </ul>
                                </form>
								<div class="m-t-30 text-center">
								<button class="btn btn-primary btn-lg">Add to upload</button>
								</div>
							</div>
						</div>
					</div>
				</div>
				<div id="add_group" class="modal custom-modal fade center-modal" role="dialog">
					<div class="modal-dialog">
						<button type="button" class="close" data-dismiss="modal">&times;</button>
						<div class="modal-content">
							<div class="modal-header">
								<h3 class="modal-title">Create a group</h3>
							</div>
							<div class="modal-body">
								<p>Groups are where your team communicates. They’re best when organized around a topic — #leads, for example.</p>
								<form>
								<div class="form-group">
									<label>Group Name <span class="text-danger">*</span></label>
									<input class="form-control" required="" type="text">
								</div>
								<div class="form-group">
									<label>Send invites to: <span class="text-muted-light">(optional)</span></label>
									<input class="form-control" required="" type="text">
								</div>
								<div class="m-t-50 text-center">
								<button class="btn btn-primary btn-lg">Create Group</button>
								</div>
							</form>
							</div>
						</div>
					</div>
				</div>
				<div id="add_chat_user" class="modal custom-modal fade center-modal" role="dialog">
					<div class="modal-dialog">
						<button type="button" class="close" data-dismiss="modal">&times;</button>
						<div class="modal-content">
							<div class="modal-header">
								<h3 class="modal-title">Create Chat Group</h3>
							</div>
							<div class="modal-body">
								<div class="input-group m-b-30">
									<input placeholder="Search to start a chat" class="form-control search-input input-lg" id="btn-input" type="text">
									<span class="input-group-btn">
										<button class="btn btn-primary btn-lg">Search</button>
									</span>
								</div>
								<div>
									<h2>Users:</h2>
                                    <p>Press on the user to add</p>
									<ul class="media-list media-list-linked chat-user-list">
                                        <div id="usersList"></div>
									</ul>
								</div>

							</div>
						</div>
					</div>
				</div>
				<div id="share_files" class="modal custom-modal fade center-modal" role="dialog">
					<div class="modal-dialog">
						<button type="button" class="close" data-dismiss="modal">&times;</button>
						<div class="modal-content">
							<div class="modal-header">
								<h3 class="modal-title">Share File</h3>
							</div>
							<div class="modal-body">
								<div class="files-share-list">
									<div class="files-cont">
										<div class="file-type">
											<span class="files-icon"><i class="fa fa-file-pdf-o"></i></span>
										</div>
										<div class="files-info">
											<span class="file-name text-ellipsis">AHA Selfcare Mobile Application Test-Cases.xls</span>
											<span class="file-author"><a href="#">Bernardo Galaviz</a></span> <span class="file-date">May 31st at 6:53 PM</span>
										</div>
									</div>
								</div>
								<div class="form-group">
									<label>Share With</label>
									<input class="form-control" type="text">
								</div>
								<div class="m-t-50 text-center">
									<button class="btn btn-primary btn-lg">Share</button>
								</div>
							</div>
						</div>
					</div>
				</div>
            </div>
        </div>
		<div class="task-overlay" data-reff="#task_window"></div>
		<div class="sidebar-overlay" data-reff="#sidebar"></div>

		{% endblock %}
    </body>
    {% block scripts %}
    {{super()}}
    <script src="{{url_for('.static', filename='js/jquery-3.2.1.min.js')}}"></script>
    <script src="{{url_for('.static', filename='js/bootstrap.min.js')}}"></script>
    <script src="{{url_for('.static', filename='js/jquery.slimscroll.js')}}"></script>
    <script src="{{url_for('.static', filename='js/dropfiles.js')}}"></script>
    <script src="{{url_for('.static', filename='js/app.js')}}"></script>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/socket.io/1.3.6/socket.io.min.js"></script>


    <script>


    window.onload = function()
    {

       $.ajax({
			url: '/friendList',
			type: 'POST',
			success: function(response){
                $("#friendList").html(response);

			},
			error: function(error){

				console.log(error);
			}
		});
        $.ajax({
			url: '/profile',
			type: 'POST',
			success: function(response){
                $("#chatHolder").html(response);

			},
			error: function(error){

				console.log(error);
			}
		});

    }//time in milliseconds


    function chatOpen(id){
        $.ajax({
			url: '/chatBox',
            data: {"id":id},
			type: 'POST',
			success: function(response){
                $("#chatHolder").html(response);

			},
			error: function(error){

				console.log(error);
			}
		});
    }




//socketio script
        var socket = io.connect('http://' + document.domain + ':' + location.port);
    socket.on('connect', function() {
        socket.emit('connect_message', {data: 'I\'m connected!'});
        socket.removeAllListeners();
    });

        function addFriends(){
            $.ajax({
			url: '/getUsers',
			type: 'POST',
			success: function(response){
                $("#usersList").html(response);

			},
			error: function(error){

				console.log(error);
			}
		});
        }

        clearInterval(finterval);
var finterval = setInterval(function()
    {
        $.ajax({
			url: '/friendList',
			type: 'POST',
			success: function(response){
                $("#friendList").html(response);

			},
			error: function(error){

				console.log(error);
			}
		});
    }, 3000);//time in milliseconds


    </script>


       {% endblock %}


</html>
